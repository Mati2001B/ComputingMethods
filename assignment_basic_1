""" Goal: write a Python program able to print the relative frequence of each letter
of the alphabet (without distinguishing between lower and upper case) in a book. """

import argparse
import os
from collections import Counter


def get_file():
    # Get file from the command line
    parser = argparse.ArgumentParser()
    parser.add_argument("filepath", help="Path to the book file", type=str)
    args = parser.parse_args()  # analyzes arguments

    # Open file in 'read' mode
    with open(args.filepath, 'r', encoding='utf-8') as book:
        #content = book.read()
        return book.read()


# Print the frequence of each letter of the alphabet in the book
def occurrences(content):
    """
    Uses a list comprehension:
    -> iterates on every character in the book (content) and selects only the letters from the alphabet;
    -> all the letters are re-wrote in lower case.
    
    Uses the object Counter as subclass of a dictionary:
    -> 'Counter' counts how many times the letter is read in the list 'letters';
    -> 'dict' coverts counter in a proper dictionary.
    """
    letters = [char.lower() for char in content if char.isalpha()]
    return dict(Counter(letters))


# Get the explanation of the 'occurences' function through 'help' command
#print('Using help:')
#help(occurrences)


def main():
    content = get_file()
    letters_frequency = occurrences(content)

    print('Letters frequency:')
    for letter, occurrence in sorted(letters_frequency.items()):
        print(f'{letter} : {occurrence}')


if __name__ == '__main__':
    main()



